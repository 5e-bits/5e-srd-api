# /api/classes/{indexParam}
class-path:
  get:
    summary: Get a class by index.
    description: |
      # Class

      A character class is a fundamental part of the identity and nature of
      characters in the Dungeons & Dragons role-playing game. A character's
      capabilities, strengths, and weaknesses are largely defined by its class.
      A character's class affects a character's available skills and abilities. [[SRD p8-55](https://media.wizards.com/2016/downloads/DND/SRD-OGL_V5.1.pdf#page=8)]
    tags:
      - Class
    parameters:
      - $ref: "../parameters/combined.yml#/class-index"
    responses:
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "../schemas/combined.yml#/Class"
            example:
              class_levels: "/api/classes/barbarian/levels"
              hit_die: 12
              index: barbarian
              multi_classing:
                prerequisites:
                  - ability_score:
                      index: str
                      name: STR
                      url: "/api/ability-scores/str"
                    minimum_score: 13
                proficiencies:
                  - index: shields
                    name: Shields
                    url: "/api/proficiencies/shields"
                  - index: simple-weapons
                    name: Simple Weapons
                    url: "/api/proficiencies/simple-weapons"
                  - index: martial-weapons
                    name: Martial Weapons
                    url: "/api/proficiencies/martial-weapons"
                proficiency_choices: []
              name: Barbarian
              proficiencies:
                - index: light-armor
                  name: Light Armor
                  url: "/api/proficiencies/light-armor"
                - index: medium-armor
                  name: Medium Armor
                  url: "/api/proficiencies/medium-armor"
                - index: shields
                  name: Shields
                  url: "/api/proficiencies/shields"
                - index: simple-weapons
                  name: Simple Weapons
                  url: "/api/proficiencies/simple-weapons"
                - index: martial-weapons
                  name: Martial Weapons
                  url: "/api/proficiencies/martial-weapons"
              proficiency_choices:
                - choose: 2
                  from:
                    - index: skill-animal-handling
                      name: "Skill: Animal Handling"
                      url: "/api/proficiencies/skill-animal-handling"
                    - index: skill-athletics
                      name: "Skill: Athletics"
                      url: "/api/proficiencies/skill-athletics"
                    - index: skill-intimidation
                      name: "Skill: Intimidation"
                      url: "/api/proficiencies/skill-intimidation"
                    - index: skill-nature
                      name: "Skill: Nature"
                      url: "/api/proficiencies/skill-nature"
                    - index: skill-perception
                      name: "Skill: Perception"
                      url: "/api/proficiencies/skill-perception"
                    - index: skill-survival
                      name: "Skill: Survival"
                      url: "/api/proficiencies/skill-survival"
                  type: proficiencies
              saving_throws:
                - index: str
                  name: STR
                  url: "/api/ability-scores/str"
                - index: con
                  name: CON
                  url: "/api/ability-scores/con"
              starting_equipment:
                - equipment:
                    index: explorers-pack
                    name: Explorer's Pack
                    url: "/api/equipment/explorers-pack"
                  quantity: 1
                - equipment:
                    index: javelin
                    name: Javelin
                    url: "/api/equipment/javelin"
                  quantity: 4
              starting_equipment_options:
                - choose: 1
                  from:
                    - equipment:
                        index: greataxe
                        name: Greataxe
                        url: "/api/equipment/greataxe"
                      quantity: 1
                    - equipment_option:
                        choose: 1
                        from:
                          equipment_category:
                            index: martial-melee-weapons
                            name: Martial Melee Weapons
                            url: "/api/equipment-categories/martial-melee-weapons"
                        type: equipment
                  type: equipment
                - choose: 1
                  from:
                    - equipment:
                        index: handaxe
                        name: Handaxe
                        url: "/api/equipment/handaxe"
                      quantity: 2
                    - equipment_option:
                        choose: 1
                        from:
                          equipment_category:
                            index: simple-weapons
                            name: Simple Weapons
                            url: "/api/equipment-categories/simple-weapons"
                        type: equipment
                  type: equipment
              subclasses:
                - index: berserker
                  name: Berserker
                  url: "/api/subclasses/berserker"
              url: "/api/classes/barbarian"
# /api/classes/{indexParam}/subclasses
class-subclass-path:
  get:
    summary: Get subclasses available for a class.
    tags:
      - Class Resource Lists
    parameters:
      - $ref: "../parameters/combined.yml#/class-index"
    responses:
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "../schemas/combined.yml#/APIReferenceList"
            example:
              count: 1
              results:
                - index: berserker
                  name: Berserker
                  url: "/api/subclasses/berserker"
#/api/classes/{indexParam}/spells
class-spells-path:
  get:
    summary: Get spells available for a class.
    tags:
      - Class Resource Lists
    parameters:
      - $ref: "../parameters/combined.yml#/class-index"
    responses:
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "../schemas/combined.yml#/APIReferenceList"
            example:
              count: 2
              results:
                - index: power-word-kill
                  name: Power Word Kill
                  url: "/api/spells/power-word-kill"
                - index: true-polymorph
                  name: True Polymorph
                  url: "/api/spells/true-polymorph"
# /api/classes/{index}/spellcasting
class-spellcasting-path:
  get:
    summary: Get spellcasting info for a class.
    tags:
      - Class
    parameters:
      - $ref: "../parameters/combined.yml#/class-index"
    responses:
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "../schemas/combined.yml#/Spellcasting"
            example:
              level: 1
              spellcasting_ability:
                index: cha
                name: CHA
                url: "/api/ability-scores/cha"
              info:
                - name: Cantrips
                  desc:
                    - You know two cantrips of your choice from the bard spell list. You learn additional
                      bard cantrips of your choice at higher levels, as shown in the Cantrips Known
                      column of the Bard table.
                - name: Spell Slots
                  desc:
                    - The Bard table shows how many spell slots you have to cast your spells of 1st
                      level and higher. To cast one of these spells, you must expend a slot of the spell's
                      level or higher. You regain all expended spell slots when you finish a long rest.
                    - For example, if you know the 1st-level spell cure wounds and have a 1st-level
                      and a 2nd-level spell slot available, you can cast cure wounds using either slot.
                - name: Spells Known of 1st Level and Higher
                  desc:
                    - You know four 1st-level spells of your choice from the bard spell list.
                    - The Spells Known column of the Bard table shows when you learn more bard spells
                      of your choice.
                    - Each of these spells must be of a level for which you have spell slots, as shown
                      on the table. For instance, when you reach 3rd level in this class, you can learn
                      one new spell of 1st or 2nd level.
                    - Additionally, when you gain a level in this class, you can choose one of the bard
                      spells you know and replace it with another spell from the bard spell list, which
                      also must be of a level for which you have spell slots.
                - name: Spellcasting Ability
                  desc:
                    - Charisma is your spellcasting ability for your bard spells. Your magic comes from
                      the heart and soul you pour into the performance of your music or oration. You
                      use your Charisma whenever a spell refers to your spellcasting ability. In addition,
                      you use your Charisma modifier when setting the saving throw DC for a bard spell
                      you cast and when making an attack roll with one.
                    - Spell save DC = 8 + your proficiency bonus + your Charisma modifier.
                    - Spell attack modifier = your proficiency bonus + your Charisma modifier.
                - name: Ritual Casting
                  desc:
                    - You can cast any bard spell you know as a ritual if that spell has the ritual
                      tag.
                - name: Spellcasting Focus
                  desc:
                    - You can use a musical instrument (see Equipment) as a spellcasting focus for your
                      bard spells.
      "404":
        description: Not found.
        content:
          application/json:
            schema:
              $ref: "../schemas/combined.yml#/error-response"
            example:
              error: Not found

# /api/classes/{index}/features
class-features-path:
  get:
    summary: Get features available for a class.
    tags:
      - Class Resource Lists
    parameters:
      - $ref: "../parameters/combined.yml#/class-index"
    responses:
      "200":
        description: List of features for the class.
        content:
          application/json:
            schema:
              $ref: "../schemas/combined.yml#/APIReferenceList"
# /api/classes/{index}/proficiencies
class-proficiencies-path:
  get:
    summary: Get proficiencies available for a class.
    tags:
      - Class Resource Lists
    parameters:
      - $ref: "../parameters/combined.yml#/class-index"
    responses:
      "200":
        description: List of proficiencies for the class.
        content:
          application/json:
            schema:
              $ref: "../schemas/combined.yml#/APIReferenceList"
# /api/classes/{index}/multi-classing:
class-multi-classing-path:
  get:
    summary: Get multiclassing resource for a class.
    tags:
      - Class
    parameters:
      - $ref: "../parameters/combined.yml#/class-index"
    responses:
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "../schemas/combined.yml#/Multiclassing"
            example:
              prerequisites:
                - ability_score:
                    index: str
                    name: STR
                    url: "/api/ability-scores/str"
                  minimum_score: 13
              proficiencies:
                - index: shields
                  name: Shields
                  url: "/api/proficiencies/shields"
                - index: simple-weapons
                  name: Simple Weapons
                  url: "/api/proficiencies/simple-weapons"
                - index: martial-weapons
                  name: Martial Weapons
                  url: "/api/proficiencies/martial-weapons"
              proficiency_choices: []

# /api/classes/{index}/levels
class-levels-path:
  get:
    summary: Get all level resources for a class.
    tags:
      - Class Levels
    parameters:
      - $ref: "../parameters/combined.yml#/class-index"
      - $ref: "../parameters/combined.yml#/challenge-rating-filter"
    responses:
      "200":
        description: OK
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "../schemas/combined.yml#/ClassLevel"
# /api/classes/{index}/levels/{class_level}
class-level-path:
  get:
    summary: Get level resource for a class and level.
    tags:
      - Class Levels
    parameters:
      - $ref: "../parameters/combined.yml#/class-index"
      - $ref: "../parameters/combined.yml#/class-level"
    responses:
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "../schemas/combined.yml#/ClassLevel"
            example:
              level: 1
              ability_score_bonuses: 0
              prof_bonus: 2
              features:
                - index: rage
                  name: Rage
                  url: "/api/features/rage"
                - index: barbarian-unarmored-defense
                  name: Unarmored Defense
                  url: "/api/features/barbarian-unarmored-defense"
              class_specific:
                creating_spell_slots: []
                rage_count: 2
                rage_damage_bonus: 2
                brutal_critical_dice: 0
              index: barbarian-1
              class:
                index: barbarian
                name: Barbarian
                url: "/api/classes/barbarian"
              url: "/api/classes/barbarian/levels/1"
# /api/classes/{index}/levels/{class_level}/features:
class-level-features-path:
  get:
    summary: Get features available to a class at the requested level.
    tags:
      - Class Levels
    parameters:
      - $ref: "../parameters/combined.yml#/class-index"
      - $ref: "../parameters/combined.yml#/class-level"
    responses:
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "../schemas/combined.yml#/APIReferenceList"
            example:
              count: 2
              results:
                - index: barbarian-unarmored-defense
                  name: Unarmored Defense
                  url: "/api/features/barbarian-unarmored-defense"
                - index: rage
                  name: Rage
                  url: "/api/features/rage"
# /api/classes/{index}/levels/{spell_level}/spells
class-spell-level-spells-path:
  get:
    summary: Get spells of the requested level available to the class.
    tags:
      - Class Levels
    parameters:
      - $ref: "../parameters/combined.yml#/class-index"
      - $ref: "../parameters/combined.yml#/spell-level"
    responses:
      "200":
        description: OK
        content:
          application/json:
            schema:
              $ref: "../schemas/combined.yml#/APIReferenceList"
            example:
              count: 5
              results:
                - index: dominate-monster
                  name: Dominate Monster
                  url: "/api/spells/dominate-monster"
                - index: earthquake
                  name: Earthquake
                  url: "/api/spells/earthquake"
                - index: incendiary-cloud
                  name: Incendiary Cloud
                  url: "/api/spells/incendiary-cloud"
                - index: power-word-stun
                  name: Power Word Stun
                  url: "/api/spells/power-word-stun"
                - index: sunburst
                  name: Sunburst
                  url: "/api/spells/sunburst"
